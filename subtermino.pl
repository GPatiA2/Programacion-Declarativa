subtermino(T, T).subtermino(S, T):- functor(T, _F, NA), NA > 0 , sub(S, T, NA).sub(S, T, N) :- arg(N, T, A), subtermino(S, A).sub(S, T, N) :- N > 1, N1 is N - 1, sub(S, T, N1).subtermino2(T, T).subtermino2(S, T):- T =.. [_F | LA], sub_list(S, LA).sub_list(S, [A | _LA] ) :- subtermino2(S, A).sub_list(S, [_A | LA] ) :- sub_list(S, LA).subst(T, S, T, S).subst(T, S, E, E) :-  T \= E, atomic(E).subst(T, S, E, NE):- nonvar(E), E =.. [F | LA], subst_list(T, S, LA, NLA), NE =.. [F | NLA].subst_list(T, S, [ ], [ ]). subst_list(T, S, [A | LA], [NA | NLA]) :- subst(T, S, A, NA), subst_list(T, S, LA, NLA).